# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
# !!  File generated by Ansible, DO NOT EDIT  !!
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

# The default requires explicit activation of protocol 1
Protocol 2

HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key

# Lifetime and size of ephemeral version 1 server key
#KeyRegenerationInterval 1h
#ServerKeyBits 1024

# Ciphers and keying
#RekeyLimit default none

# Logging
SyslogFacility AUTHPRIV

# Authentication
Port {{ ssh.port }}
PermitRootLogin {{ 'yes' if (ssh.permit_root_login) else 'no' }}
MaxAuthTries {{ ssh.max_auth_retries }}
MaxSessions {{ ssh.max_sessions }}
PubkeyAuthentication {{ 'yes' if (ssh.pubkey_auth) else 'no' }}
AuthorizedKeysFile      .ssh/authorized_keys
AllowUsers {{ ssh.allow_user }}
PermitEmptyPasswords no
PasswordAuthentication {{ 'yes' if (ssh.password_auth) else 'no' }}

ChallengeResponseAuthentication no

# GSSAPI options
GSSAPIAuthentication yes
GSSAPICleanupCredentials no

# PAM
UsePAM yes
#AuthenticationMethods publickey,password publickey,keyboard-interactive
AuthenticationMethods publickey,password publickey

X11Forwarding yes
UsePrivilegeSeparation sandbox          # Default for new installations.

# no default banner path
#Banner none

# Accept locale-related environment variables
AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE
AcceptEnv XMODIFIERS

# override default of no subsystems
Subsystem       sftp    /usr/libexec/openssh/sftp-server



